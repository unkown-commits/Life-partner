<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Life Partner</title>
  <style>
    :root{
      --pink:#ff4d88;
      --bg:#ffeef6;
      --card:#fff;
    }

    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", Arial;
      background:var(--bg);
      color:#222;
      text-align:center;
    }

    .card{
      margin:20px auto;
      padding:20px;
      background:var(--card);
      max-width:650px;
      border-radius:12px;
      box-shadow:0 8px 30px rgba(0,0,0,0.08);
      position:relative;
    }

    .card p{margin:6px 0;color:#444;font-weight:700}
    #welcomeName{font-size:34px;font-weight:900;margin:6px 0}

    input#userName{
      margin-top:12px;
      width:78%;
      padding:10px 12px;
      font-size:16px;
      border-radius:8px;
      border:1px solid #d0cfd2;
      outline:none;
    }

    .ok-btn{
      position:absolute;
      right:18px;
      top:50%;
      transform:translateY(-50%);
      background:var(--pink);
      color:#fff;
      border:none;
      padding:12px 16px;
      border-radius:10px;
      font-weight:800;
      cursor:pointer;
      box-shadow:0 8px 20px rgba(255,77,136,0.18);
    }

    /* toast */
    #toast{
      position:fixed;
      top:20px;
      left:50%;
      transform:translateX(-50%);
      background:rgba(0,0,0,0.8);
      color:#fff;
      padding:10px 16px;
      border-radius:8px;
      font-weight:700;
      display:none;
      z-index:9999;
    }

    /* modal backdrop */
    #modalBG{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.62);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:2000;
      padding:16px;
    }

    .modalCard{
      position:relative;
      width:100%;
      max-width:820px;
      border-radius:12px;
      overflow:visible; /* allow overlay to sit above */
      background:#000;
    }

    /* IMAGE */
    .modalCard img{
      display:block;
      width:100%;
      height:auto;
      object-fit:cover;
      border-radius:10px;
    }

    /* overlay placed above the image (so face not covered) */
    .overlayBox{
      position:absolute;
      left:50%;
      bottom:100%;
      transform:translate(-50%, -8px);
      text-align:center;
      color:#fff;
      z-index:5000;
      width:90%;
      pointer-events:none;
      text-shadow:0 4px 12px rgba(0,0,0,0.7);
    }

    .overlayName{
      font-size:20px;
      font-weight:900;
      margin-bottom:6px;
      background:rgba(0,0,0,0.45);
      display:inline-block;
      padding:6px 10px;
      border-radius:6px;
    }

    .overlaySub{
      font-size:14px;
      font-weight:700;
      background:rgba(0,0,0,0.38);
      padding:5px 10px;
      border-radius:6px;
      display:inline-block;
      margin-top:6px;
    }

    /* close button */
    .closeBtn{
      position:absolute;
      right:10px;
      top:10px;
      background:rgba(255,255,255,0.95);
      border:0;
      padding:6px 10px;
      border-radius:8px;
      font-weight:800;
      cursor:pointer;
      z-index:6000;
    }

    @media (max-width:520px){
      #welcomeName{font-size:28px}
      .overlayName{font-size:18px}
      .overlaySub{font-size:13px}
      input#userName{width:68%}
    }
  </style>
</head>
<body>

  <!-- toast -->
  <div id="toast" role="status" aria-live="polite">रुको ज़रा — सब्र करो</div>

  <!-- main card -->
  <div class="card" role="main" aria-labelledby="welcomeName">
    
    <h1 id="welcomeName">Welcome</h1>
    <p>अपना life partner को देखो</p>

    <button class="ok-btn" id="openBtn">OK</button>

    <div>
      <input id="userName" type="text" placeholder="अपना नाम लिखिए..." aria-label="Enter your name">
    </div>
  </div>

  <!-- Modal -->
  <div id="modalBG" role="dialog" aria-modal="true" aria-hidden="true" onclick="hideModal()">
    <div class="modalCard" onclick="event.stopPropagation()">
      <button class="closeBtn" onclick="hideModal()" aria-label="Close image">✕</button>

      <!-- overlay (placed above image so face not covered) -->
      <div class="overlayBox" aria-hidden="true">
        <div class="overlayName" id="overlayName">User Name</div>
        <div class="overlaySub">ये है आपका life partner</div>
      </div>

      <!-- image (change filename if required) -->
      <img src="1765008556393.jpg" alt="Life partner">
    </div>
  </div>

  <!-- audio (your uploaded file). controls NOT shown -->
  <audio id="bgMusic" src="audio.mp3" preload="auto"></audio>

  <script>
    const openBtn = document.getElementById('openBtn');
    const modalBG = document.getElementById('modalBG');
    const toast = document.getElementById('toast');
    const userInput = document.getElementById('userName');
    const overlayName = document.getElementById('overlayName');
    const bgMusic = document.getElementById('bgMusic');

    // fade helpers
    let fadeInInterval = null;
    let fadeOutInterval = null;

    function fadeIn(audio, duration = 800) {
      try {
        clearInterval(fadeInInterval);
        audio.volume = 0;
        const step = 50;
        const steps = Math.max(1, Math.floor(duration / step));
        let cur = 0;
        fadeInInterval = setInterval(() => {
          cur++;
          audio.volume = Math.min(1, (cur / steps));
          if (cur >= steps) clearInterval(fadeInInterval);
        }, step);
      } catch(e){}
    }

    function fadeOutAndStop(audio, duration = 600) {
      try {
        clearInterval(fadeOutInterval);
        const step = 50;
        const steps = Math.max(1, Math.floor(duration / step));
        let cur = steps;
        fadeOutInterval = setInterval(() => {
          audio.volume = Math.max(0, (cur / steps));
          cur--;
          if (cur <= 0) {
            clearInterval(fadeOutInterval);
            try{ audio.pause(); audio.currentTime = 0; }catch(e){}
          }
        }, step);
      } catch(e){}
    }

    openBtn.addEventListener('click', () => {
      // get name
      let name = userInput.value.trim();
      if(!name) name = "Unknown";

      // set overlay text
      overlayName.textContent = name;

      // show toast immediately
      toast.style.display = 'block';
      setTimeout(()=> { toast.style.display = 'none'; }, 3000);

      // after delay open modal and THEN start music with fade-in
      setTimeout(()=> {
        modalBG.style.display = 'flex';
        modalBG.setAttribute('aria-hidden','false');

        // scroll to top so overlay aligns
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // play + fade-in
        try {
          const promise = bgMusic.play();
          if (promise !== undefined) {
            promise.then(() => {
              fadeIn(bgMusic, 900); // 0.9s fade-in
            }).catch((err)=>{
              // sometimes browsers block play; ignore silently
              console.log('play blocked:', err);
            });
          } else {
            fadeIn(bgMusic, 900);
          }
        } catch(e){
          console.log('audio play error', e);
        }

      }, 3500);
    });

    // hide modal (fade out music)
    function hideModal(){
      modalBG.style.display = 'none';
      modalBG.setAttribute('aria-hidden','true');
      // fade out then stop
      try{
        fadeOutAndStop(bgMusic, 600);
      }catch(e){}
    }

    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape') hideModal();
    });
  </script>
</body>
        </html>
